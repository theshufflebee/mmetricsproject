---
title: "Testing"
output:
  pdf_document: 
    toc: true
    fig_caption: yes
header-includes:
  - \usepackage{amsmath}
---
\newpage

```{r library_setup, results=FALSE, warning=FALSE, message=FALSE, echo=FALSE}
rm(list=ls())
require(tinytex) #LaTeX
require(ggplot2) #plots
require(AEC) #JP-Renne functions
require(expm) #matrix exponents
require(here) # ?
require(stringr) # ?
require(dplyr) #data management
require(lubridate) # ?

getwd()
setwd("...")
```

```{r rawdata_setup, results=FALSE, warning=FALSE, message=FALSE}

#political shocks
raw_truths <- read.csv(here("data/political_data", "trump_all_truths.csv"))
raw_tweets <- read.csv(here("data/political_data", "tweets.csv"))



#market prices
raw_ONEQ <- read.csv(here("data/market_data", "ONEQ.csv"))
raw_SMI <- read.csv(here("data/market_data", "SMI.csv"))
raw_SPY <- read.csv(here("data/market_data", "SPY.csv"))
raw_VTHR <- read.csv(here("data/market_data", "VTHR.csv"))
raw_VTI <- read.csv(here("data/market_data", "VTI.csv"))

raw_SPYq <- read.csv(here("data/market_data", "SPYq.csv"))

```

```{r cleandata_setup, results=FALSE, warning=FALSE, message=FALSE}

#political shocks
truths <- 1
tweets <- 1



#market prices
ONEQ <- 1
SMI <- 1
SPY <- 1
VTHR <- 1
VTI <- 1

```

```{r dailydata, results=FALSE, warning=FALSE, message=FALSE}

```




# Plots

## Total 
```{r total market plots}

#SPY
ggplot(raw_SPY, aes(x = timestamp, y = close)) +
  geom_point(color = "blue", size = 0.01) +
  geom_line(aes(group=1), color="blue", linewidth=0.05) +
  labs(title = "SPY Price Over Time",
       x = "Time",
       y = "Close Price") 

SPY_times = as.POSIXct(raw_SPY$timestamp, format = "%Y-%m-%d %H:%M:%S", tz = "UTC")
#SPY correct dates?
ggplot(raw_SPY, aes(x = SPY_times, y = close)) +
  geom_point(color = "blue", size = 0.01) +
  geom_line(aes(group=1)) +
  labs(title = "SPY Price Over Time",
       x = "Time",
       y = "Close Price") +
   scale_x_datetime(date_labels = "%b:%d",  
                    date_breaks = "1 day") +
   theme_minimal() +
   theme(axis.text.x = element_text(angle = 45, hjust = 1))




#SPYquick (1min)
ggplot(raw_SPYq, aes(x = timestamp, y = close)) +
  geom_point(color = "blue", size = 0.01) +
  geom_line(aes(group=1), color="blue", linewidth=0.05) +
  labs(title = "SPYq Price Over Time",
       x = "Time",
       y = "Close Price") 

SPYq_times = as.POSIXct(raw_SPYq$timestamp, format = "%Y-%m-%d %H:%M:%S", tz = "UTC")
#SPYq correct dates?
ggplot(raw_SPYq, aes(x = SPYq_times, y = close)) +
  geom_point(color = "blue", size = 0.01) +
  geom_line(aes(group=1)) +
  labs(title = "SPYq Price Over Time",
       x = "Time",
       y = "Close Price") +
   scale_x_datetime(date_labels = "%b:%d",  
                    date_breaks = "1 day") +
   theme_minimal() +
   theme(axis.text.x = element_text(angle = 45, hjust = 1))





#ONEQ
ggplot(raw_ONEQ, aes(x = timestamp, y = close)) +
  geom_point(color = "blue", size = 0.01) +
  geom_line(aes(group=1), color="blue", linewidth=0.05) +
  labs(title = "ONEQ Price Over Time",
       x = "Time",
       y = "Close Price") 

ONEQ_times = as.POSIXct(raw_ONEQ$timestamp, format = "%Y-%m-%d %H:%M:%S", tz = "UTC")
#ONEQ correct dates?
ggplot(raw_ONEQ, aes(x = ONEQ_times, y = close)) +
  geom_point(color = "blue", size = 0.01) +
  geom_line(aes(group=1)) +
  labs(title = "ONEQ Price Over Time",
       x = "Time",
       y = "Close Price") +
   scale_x_datetime(date_labels = "%b:%d",  
                    date_breaks = "1 day") +
   theme_minimal() +
   theme(axis.text.x = element_text(angle = 45, hjust = 1))





#SMI
ggplot(raw_SMI, aes(x = timestamp, y = close)) +
  geom_point(color = "blue", size = 0.01) +
  geom_line(aes(group=1), color="blue", linewidth=0.05) +
  labs(title = "SMI Price Over Time",
       x = "Time",
       y = "Close Price") 

SMI_times = as.POSIXct(raw_SMI$timestamp, format = "%Y-%m-%d %H:%M:%S", tz = "UTC")
#SMI correct dates?
ggplot(raw_SMI, aes(x = SMI_times, y = close)) +
  geom_point(color = "blue", size = 0.01) +
  geom_line(aes(group=1)) +
  labs(title = "SMI Price Over Time",
       x = "Time",
       y = "Close Price") +
   scale_x_datetime(date_labels = "%b:%d",  
                    date_breaks = "1 day") +
   theme_minimal() +
   theme(axis.text.x = element_text(angle = 45, hjust = 1))





#VTHR
ggplot(raw_VTHR, aes(x = timestamp, y = close)) +
  geom_point(color = "blue", size = 0.01) +
  geom_line(aes(group=1), color="blue", linewidth=0.05) +
  labs(title = "VTHR Price Over Time",
       x = "Time",
       y = "Close Price") 

VTHR_times = as.POSIXct(raw_VTHR$timestamp, format = "%Y-%m-%d %H:%M:%S", tz = "UTC")
#VTHR correct dates?
ggplot(raw_VTHR, aes(x = VTHR_times, y = close)) +
  geom_point(color = "blue", size = 0.01) +
  geom_line(aes(group=1)) +
  labs(title = "VTHR Price Over Time",
       x = "Time",
       y = "Close Price") +
   scale_x_datetime(date_labels = "%b:%d",  
                    date_breaks = "1 day") +
   theme_minimal() +
   theme(axis.text.x = element_text(angle = 45, hjust = 1))





#VTI
ggplot(raw_VTI, aes(x = timestamp, y = close)) +
  geom_point(color = "blue", size = 0.01) +
  geom_line(aes(group=1), color="blue", linewidth=0.05) +
  labs(title = "VTI Price Over Time",
       x = "Time",
       y = "Close Price") 

VTI_times = as.POSIXct(raw_VTI$timestamp, format = "%Y-%m-%d %H:%M:%S", tz = "UTC")
#VTI correct dates?
ggplot(raw_VTI, aes(x = VTI_times, y = close)) +
  geom_point(color = "blue", size = 0.01) +
  geom_line(aes(group=1)) +
  labs(title = "VTI Price Over Time",
       x = "Time",
       y = "Close Price") +
   scale_x_datetime(date_labels = "%b:%d",  
                    date_breaks = "1 day") +
   theme_minimal() +
   theme(axis.text.x = element_text(angle = 45, hjust = 1))
```


## Per Day
```{r daily market plots}

#SPYquick (1min)
ggplot(raw_SPYq, aes(x = timestamp, y = close)) +
  geom_point(color = "blue", size = 0.01) +
  geom_line(aes(group=1), color="blue", linewidth=0.05) +
  labs(title = "SPYq Price Over Time",
       x = "Time",
       y = "Close Price") 

SPYq_times = as.POSIXct(raw_SPYq$timestamp, format = "%Y-%m-%d %H:%M:%S", tz = "UTC")
#SPYq correct dates?
ggplot(raw_SPYq, aes(x = SPYq_times, y = close)) +
  geom_point(color = "blue", size = 0.01) +
  geom_line(aes(group=1)) +
  labs(title = "SPYq Price Over Time",
       x = "Time",
       y = "Close Price") +
   scale_x_datetime(date_labels = "%b:%d",  
                    date_breaks = "1 day") +
   theme_minimal() +
   theme(axis.text.x = element_text(angle = 45, hjust = 1))

```








































